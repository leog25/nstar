<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>North Star VR Viewer</title>

    <!-- A-Frame for WebVR -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>

    <!-- Custom styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Permission Request Button (hidden after permission granted) -->
    <div id="permission-overlay" class="overlay">
        <button id="request-permission" class="permission-btn">
            Enable Motion Sensors to Start
        </button>
        <p class="permission-info">This app needs access to your device's motion sensors to track the North Star</p>
    </div>

    <!-- Orientation Values Overlay -->
    <div id="orientation-overlay" class="orientation-overlay">
        <div class="orientation-value">
            <span class="label">Heading:</span>
            <span id="heading-value">--째</span>
        </div>
        <div class="orientation-value">
            <span class="label">Pitch:</span>
            <span id="pitch-value">--째</span>
        </div>
        <div class="orientation-value">
            <span class="label">Roll:</span>
            <span id="roll-value">--째</span>
        </div>
        <div class="orientation-value">
            <span class="label">Direction:</span>
            <span id="compass-value">--</span>
        </div>
    </div>

    <!-- A-Frame VR Scene -->
    <a-scene id="vr-scene" vr-mode-ui="enabled: true" background="color: #000000">
        <!-- Camera with look controls for device orientation -->
        <a-entity id="camera-rig" position="0 0 0">
            <a-camera
                id="camera"
                look-controls="magicWindowTrackingEnabled: true"
                wasd-controls="enabled: false"
                position="0 0 0">
            </a-camera>
        </a-entity>

        <!-- Sky (black background) -->
        <a-sky color="#000000"></a-sky>

        <!-- North Star (Polaris) -->
        <!-- Positioned at celestial north pole -->
        <!-- In A-Frame: Y is up, -Z is forward, X is right -->
        <!-- Polaris at ~89.3째 elevation from north -->
        <a-entity id="north-star"
                  geometry="primitive: sphere; radius: 0.05"
                  material="color: #FFFFFF; emissive: #FFFFFF; emissiveIntensity: 2; shader: flat"
                  position="0 20 -2"
                  light="type: point; intensity: 0.5; distance: 50; color: #FFFFFF">
            <!-- Add glow effect -->
            <a-entity geometry="primitive: sphere; radius: 0.15"
                      material="color: #FFFFFF; opacity: 0.3; shader: flat"></a-entity>
            <a-entity geometry="primitive: sphere; radius: 0.3"
                      material="color: #FFFFFF; opacity: 0.1; shader: flat"></a-entity>
        </a-entity>

        <!-- Optional: Add some reference stars for context -->
        <a-entity id="reference-stars">
            <!-- A few dimmer stars for spatial reference -->
            <a-sphere position="5 10 -15" radius="0.02" color="#CCCCCC" opacity="0.7"></a-sphere>
            <a-sphere position="-8 5 -10" radius="0.02" color="#CCCCCC" opacity="0.7"></a-sphere>
            <a-sphere position="10 -5 -20" radius="0.02" color="#CCCCCC" opacity="0.7"></a-sphere>
            <a-sphere position="-15 15 -25" radius="0.02" color="#CCCCCC" opacity="0.7"></a-sphere>
            <a-sphere position="3 -10 -12" radius="0.02" color="#CCCCCC" opacity="0.7"></a-sphere>
        </a-entity>

        <!-- Optional: Add a subtle grid for orientation (can be toggled) -->
        <a-entity id="orientation-grid" visible="true">
            <a-entity geometry="primitive: ring; radiusInner: 9.9; radiusOuter: 10"
                      material="color: #333333; opacity: 0.3"
                      rotation="0 0 0"
                      position="0 0 0"></a-entity>
            <a-entity geometry="primitive: ring; radiusInner: 9.9; radiusOuter: 10"
                      material="color: #333333; opacity: 0.3"
                      rotation="90 0 0"
                      position="0 0 0"></a-entity>
            <a-entity geometry="primitive: ring; radiusInner: 9.9; radiusOuter: 10"
                      material="color: #333333; opacity: 0.3"
                      rotation="0 90 0"
                      position="0 0 0"></a-entity>
        </a-entity>
    </a-scene>

    <!-- Load our app logic -->
    <script src="app.js"></script>
</body>
</html>